<!DOCTYPE html>
<html>
<head>
  <title>Achievements Admin</title>
  <style>
    body { font-family: sans-serif; max-width: 500px; margin: 50px auto; }
    input, textarea { width: 100%; margin-bottom: 10px; padding: 8px; }
    button { padding: 10px 15px; cursor: pointer; }
    #login-section, #form-section { margin-top: 20px; }
  </style>
</head>
<body>

<h2>Achievements Admin</h2>

<!-- LOGIN SECTION -->
<div id="login-section">
  <input type="text" id="username" placeholder="Username">
  <input type="password" id="password" placeholder="Password">
  <button onclick="login()">Login</button>
</div>

<!-- FORM SECTION -->
<div id="form-section" style="display:none;">
  <input id="title" placeholder="Title">
  <input id="date" type="date">
  <textarea id="desc" placeholder="Description"></textarea>
  <input id="image" placeholder="Image URL (or file path)"><br><br>
  <button onclick="addAchievement()">Add Achievement</button>
</div>

<script>
function addAchievement() {
  const title = document.getElementById("title").value;
  const date = document.getElementById("date").value;
  const desc = document.getElementById("desc").value;
  const fileInput = document.getElementById("image");

  if(!title || !date || !desc || fileInput.files.length === 0) {
    alert("Please fill all fields and select an image!");
    return;
  }

  const file = fileInput.files[0];
  const reader = new FileReader();

  reader.onload = function(e) {
    const base64Image = e.target.result;

    fetch("https://script.google.com/macros/s/AKfycbxc3gGKh1yyCzQkwPO28zGBg0Fh6GrI5o5SwxDoXtfUi0hjA9NDmBvxu-4pNgHl1-lg/exec", {
      method: "POST",
      body: JSON.stringify({
        title: title,
        date: date,
        description: desc,
        imageBase64: base64Image,
        imageName: file.name
      }),
      headers: { "Content-Type": "application/json" }
    })
    .then(res => res.json())
    .then(data => {
      if(data.success) {
        alert("Achievement added successfully!");
        // Clear form
        document.getElementById("title").value = "";
        document.getElementById("date").value = "";
        document.getElementById("desc").value = "";
        document.getElementById("image").value = "";
      } else {
        alert("Error: " + data.error);
      }
    })
    .catch(err => alert("Request failed: " + err.message));
  };

  reader.readAsDataURL(file);
}
</script>


</body>
</html>
