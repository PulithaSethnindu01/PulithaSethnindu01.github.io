<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Pulitha Sethnindu | Portfolio</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        /* General styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            overflow: hidden; /* Main body overflow hidden to prevent external scroll */
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            cursor: default;
            color: #f0f0f0; /* Soft white for all text */
        }

        /* Background - Solid dark color for the main theme */
        .background {
            position: fixed;
            width: 100%;
            height: 100%;
            /* This will be set dynamically by JS, but keeping a default for initial load if any */
            background: url('https://wallpapershome.com/images/pages/pic_h/26426.jpg') no-repeat center center/cover; /* Default to home background */
            background-attachment: fixed; /* Ensures background stays fixed without parallax */
            background-size: cover; /* Ensure image covers the area */
            background-position: center center; /* Center the background image */
            z-index: -2;
            transition: background 0.5s ease; /* Transition for background changes (image to gradient, or gradient to gradient) */
        }

        /* Blur Layer - Re-enabled for interactive spotlight */
        .blur-layer {
            position: fixed;
            width: 100%;
            height: 100%;
            backdrop-filter: blur(12px);
            z-index: -1;
            pointer-events: none;
            /* Default mask for home/contact, will be set to 'none' for about page */
            mask: radial-gradient(circle 250px at var(--x, 50%) var(--y, 50%),
                transparent 0%,
                transparent 96%,
                rgba(0, 0, 0, 0.8) 98%,
                black 100%);
            -webkit-mask: radial-gradient(circle 250px at var(--x, 50%) var(--y, 50%),
                transparent 0%,
                transparent 96%,
                rgba(0, 0, 0, 0.8) 98%,
                black 100%);
            transition: mask 0.2s ease, -webkit-mask 0.2s ease;
            display: block; /* Ensure it's visible */
        }

        /* Content Area - Now the main scrollable container */
        .content {
            position: relative;
            height: calc(100% - 60px); /* Account for ruler height */
            padding: 20px; /* Uniform padding on all sides of the scrollable content */
            padding-bottom: 80px; /* Extra padding at bottom to prevent ruler overlap on last section */
            display: flex;
            flex-direction: column;
            align-items: center; /* Centers children (page-sections) horizontally */
            justify-content: flex-start; /* Align content to top */
            z-index: 1;
            text-align: center; /* Default text alignment for direct text in content */
            text-shadow: 0 0 5px rgba(0,0,0,0.5); /* Lighter text shadow for dark theme */
            overflow-y: auto; /* Allow scrolling for content that overflows */
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
            box-sizing: border-box; /* Include padding in height calculation */
        }

        .content::-webkit-scrollbar {
            display: none; /* Hide scrollbar for Chrome, Safari, Opera */
        }

        /* Main titles for each section */
        h1 {
            font-size: 3em;
            margin-bottom: 0.5em; /* Consistent spacing below the title text */
            color: #ffffff; /* Pure white for main titles */
            text-shadow: 0 0 15px rgba(255,255,255,0.2), 0 0 5px rgba(255,255,255,0.8); /* Subtle glow */
            text-align: center; /* Ensure all h1s are centered */
        }

        .typing {
            font-size: 1.2em;
            border-right: 2px solid #f0f0f0; /* Match text color */
            white-space: nowrap;
            overflow: hidden;
            min-height: 1.5em;
        }

        /* General content sections */
        .page-section {
            width: 100%;
            max-width: 800px; /* Increased max-width for better use of space */
            line-height: 1.6;
            padding-top: 30px; /* Consistent top padding for each "page" section */
            padding-bottom: 30px; /* Consistent bottom padding for each "page" section */
            text-align: center; /* Center all text content within page sections */
            opacity: 0; /* Initially hidden with opacity */
            pointer-events: none; /* Disable interaction when hidden */
            transition: opacity 0.5s ease-out; /* Smooth transition */
            flex-shrink: 0; /* Prevent shrinking when other content is large */
            display: flex; /* Make it a flex container */
            flex-direction: column; /* Stack children vertically */
            align-items: center; /* Center children horizontally (like titles, buttons) */
            justify-content: flex-start; /* Align children to the top for scrollable pages */
        }

        .page-section.active {
            opacity: 1;
            pointer-events: auto;
        }

        /* Specific section adjustments */
        #home-section {
            height: calc(100vh - 60px); /* Home section fills viewport height minus ruler */
            padding-top: 0; /* No extra padding, content is centered by justify-content */
            padding-bottom: 0;
            justify-content: center; /* Center content vertically for Home */
        }

        /* Adjustments for home section's specific elements */
        #home-section h1, #home-section .typing {
            margin-top: 0; /* No extra top margin for these */
            margin-bottom: 0.5em; /* Standard spacing below typing */
        }

        /* Adjustments for about/contact page titles */
        #about-page-section h1,
        #contact-page-section h1 {
            margin-bottom: 20px; /* Space below the title on these pages */
        }

        /* Internal content blocks within page sections */
        .about, .about-detail, .contact-section-content {
            width: 100%; /* Ensure these fill the max-width of their parent page-section */
            padding: 20px; /* Consistent internal padding */
            background: rgba(0, 0, 0, 0.7); /* Darker, more opaque panels */
            border-radius: 10px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.5);
            margin-bottom: 20px; /* Space between content blocks if stacked */
            box-sizing: border-box; /* Include padding in width calculation */
            text-align: center; /* Center all text within these blocks */
            color: #f0f0f0; /* Text color for content blocks */
        }

        /* Override general text-align for sub-headings (if needed, but mostly covered by parent) */
        .about h2, .about-detail h2, .contact-section-content h2 {
            text-align: center;
            color: #ffffff; /* Pure white for sub-headings */
        }

        /* Paragraphs within content blocks */
        .about p, .about-detail p, .contact-section-content p {
            margin-bottom: 1em; /* Standard paragraph spacing */
        }
        .about p:last-child, .about-detail p:last-child, .contact-section-content p:last-child {
            margin-bottom: 0;
        }


        /* Downward arrows for "About Me" section */
        .scroll-down-arrows {
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            color: #f0f0f0; /* Match font color */
            opacity: 1; /* Initially visible */
            transition: opacity 0.3s ease;
        }

        .scroll-down-arrows i {
            font-size: 2em;
            margin-bottom: -10px; /* Overlap arrows slightly */
            animation: bounce 2s infinite; /* Add a subtle bounce animation */
        }

        .scroll-down-arrows i:nth-child(2) {
            animation-delay: 0.2s; /* Stagger the bounce effect */
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }

        #about-detail-content {
            margin-top: 40px; /* More space between summary and detailed view */
            opacity: 0; /* Ensure this is initially hidden visually */
            pointer-events: none; /* Disable interaction until scrolled to */
            transition: opacity 0.5s ease-out;
            text-align: center; /* Ensure text within this section is centered */
        }

        #about-detail-content.active { /* This class will be added by JS on scroll */
            opacity: 1;
            pointer-events: auto;
        }

        /* Specific alignment for items within the grid */
        .about-detail-item {
            text-align: center;
        }

        .contact-form {
            text-align: center; /* Center labels and other inline text in form */
            align-items: center; /* Center input/textarea/button horizontally */
        }
        /* Make form inputs and textarea take full width up to max-width, but center them */
        .contact-form input,
        .contact-form textarea {
            width: calc(100% - 40px); /* Account for padding */
            max-width: 500px; /* Limit width */
            margin-left: auto; /* Center using margin auto */
            margin-right: auto; /* Center using margin auto */
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 5px;
            background-color: rgba(255, 255, 255, 0.08); /* Slightly transparent dark input fields */
            color: #f0f0f0;
            font-size: 1em;
            display: block; /* Ensure they behave as blocks for margin auto */
        }
        .contact-form input::placeholder,
        .contact-form textarea::placeholder {
            color: rgba(240, 240, 240, 0.7); /* Lighter placeholder text */
        }


        /* Buttons - general styles */
        .portfolio-button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 1em;
            background-color: rgba(255, 255, 255, 0.15); /* Slightly darker transparent button */
            color: #f0f0f0;
            border: 1px solid rgba(255, 255, 255, 0.3); /* Slightly darker border */
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease, border-color 0.3s ease;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            text-shadow: none;
        }

        .portfolio-button:hover {
            background-color: rgba(255, 255, 255, 0.25); /* Lighter hover state */
            border-color: rgba(255, 255, 255, 0.5); /* Lighter border on hover */
        }

        /* Ruler styles */
        .ruler-container {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 60px;
            overflow: hidden;
            z-index: 2;
            cursor: grab;
            display: flex;
            justify-content: center;
            align-items: center;
            background: linear-gradient(to top, rgba(0,0,0,0.8), rgba(0,0,0,0)); /* Darker, more opaque ruler base */
            box-shadow: 0 -5px 15px rgba(0,0,0,0.5);
        }

        .ruler-wrapper {
            width: 100%;
            height: 100%;
            overflow: hidden;
            position: relative;
        }

        .ruler {
            position: absolute;
            top: 0;
            left: 50%;
            display: flex;
            align-items: flex-end;
            user-select: none;
            transform: translateX(calc(-50% + 250px)); /* Initial position for Home */
            transition: transform 0.5s ease; /* For snapping */
        }

        .tick {
            position: relative;
            width: 10px;
            display: flex;
            justify-content: center;
        }

        .tick-line {
            width: 1px;
            background-color: #f0f0f0; /* Match font color */
        }

        .tick.short .tick-line { height: 25px; opacity: 0.4; }
        .tick.medium .tick-line { height: 40px; opacity: 0.7; }
        .tick.long .tick-line { height: 60px; opacity: 1; }

        .ruler-label {
            position: absolute;
            bottom: 65px; /* Adjust based on ruler height */
            background: rgba(255, 255, 255, 0.1); /* Darker transparent label */
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.9em;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
            user-select: none;
            white-space: nowrap; /* Prevent wrapping */
            color: #f0f0f0;
        }

        .ruler-label.active {
            opacity: 1;
        }

        /* Ruler Label Positioning */
        #home-label { left: calc(50% + 250px); transform: translateX(-50%); } /* corresponds to pageSnapPoints[0] */
        #about-label { left: calc(50% - 300px); transform: translateX(-50%); } /* corresponds to pageSnapPoints[1] */
        #contact-label { left: calc(50% - 850px); transform: translateX(-50%); } /* corresponds to pageSnapPoints[2] */


        /* Navigation Arrows */
        #next-arrow, #prev-arrow {
            position: fixed;
            top: 50%;
            width: 20px;
            height: 20px;
            border: solid #f0f0f0; /* Match theme color */
            border-width: 0 3px 3px 0;
            cursor: pointer;
            opacity: 1;
            transition: opacity 0.3s ease;
            z-index: 10;
            user-select: none;
            pointer-events: auto;
            filter: drop-shadow(0 0 3px rgba(0,0,0,0.8));
        }

        #next-arrow {
            right: 20px;
            transform: translateY(-50%) rotate(-45deg);
        }

        #prev-arrow {
            left: 20px;
            transform: translateY(-50%) rotate(135deg);
        }

        /* Prevent text selection */
        body, h1, p, .typing, .page-section, .ruler-label, .ruler-container {
            user-select: none;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .content {
                padding: 10px; /* Smaller padding on mobile */
                padding-bottom: 70px; /* Adjusted for smaller ruler */
            }

            h1 {
                font-size: 2em;
            }

            .typing, .page-section {
                font-size: 1em;
                padding: 0 10px;
                max-width: 95%; /* Use more width on mobile */
            }

            .page-section {
                line-height: 1.5;
            }

            #next-arrow,
            #prev-arrow {
                display: none;
            }

            .ruler-container {
                height: 50px;
            }

            .tick.short .tick-line { height: 18px; }
            .tick.medium .tick-line { height: 28px; }
            .tick.long .tick-line { height: 40px; }

            .ruler-label {
                bottom: 55px;
                font-size: 0.8em;
            }

            .about-detail-grid {
                grid-template-columns: 1fr;
            }

            .about-detail-item {
                padding: 10px;
            }
            /* Back button removed, so no need for mobile specific back button styles */
            .contact-methods {
                flex-direction: column;
                align-items: center;
            }
            .contact-item {
                width: 90%;
            }
            .contact-form {
                max-width: 95%;
            }

            #home-section {
                padding-top: 10px;
                padding-bottom: 10px;
            }

            .page-section {
                padding-top: 20px; /* Slightly less padding on mobile */
                padding-bottom: 20px;
            }
        }

        @media (min-width: 769px) {
            .about-detail-grid {
                grid-template-columns: 1fr 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="background" id="background"></div>
    <div class="blur-layer" id="blur-layer"></div>

    <div class="content" id="content-area">
        <!-- Home Section -->
        <div class="page-section" id="home-section">
            <h1 id="main-title">Pulitha Sethnindu</h1>
            <div class="typing" id="typing"></div>
        </div>

        <!-- About Me Section (summary and detailed) -->
        <div class="page-section" id="about-page-section">
            <h1 id="about-page-title">About Me</h1>
            <div class="about" id="about-summary-content">
                <p>
                    I'm Pulitha Sethnindu, a passionate graphic designer and web developer. With a love for visual storytelling and functional design, I blend creativity with clean code to build engaging digital experiences. Whether it's UI/UX, animation, or frontend magic, I love turning ideas into reality.
                </p>
                <!-- Replaced "Learn More About Me" button with scroll-down arrows -->
                <div class="scroll-down-arrows" id="scroll-down-arrows">
                    <i class="fas fa-chevron-down"></i>
                    <i class="fas fa-chevron-down"></i>
                </div>
            </div>

            <!-- Detailed About Me Section - Initially hidden, revealed by scrolling -->
            <div class="about-detail" id="about-detail-content">
                <h2>A Deeper Dive Into My Journey</h2>
                <div class="about-detail-grid">
                    <div class="about-detail-item">
                        <h3>Who Am I?</h3>
                        <img src="https://placehold.co/400x250/333333/FFFFFF?text=Creative+Vision" alt="Creative Vision">
                        <p>My journey in the digital world began with a fascination for how design can communicate and how code can bring those designs to life. I thrive on challenging projects that push the boundaries of what's possible, always eager to learn and adapt to new technologies. I believe in creating user-centric experiences that are not only visually appealing but also highly functional and intuitive.</p>
                    </div>
                    <div class="about-detail-item">
                        <h3>My Skills & Toolkit</h3>
                        <img src="https://placehold.co/400x250/444444/FFFFFF?text=Skills+Showcase" alt="Skills Showcase">
                        <p>I possess a versatile skill set spanning both graphic design and web development. My design expertise includes UI/UX, branding, and digital illustration, utilizing tools like Adobe Photoshop, Illustrator, and Figma. On the development front, I specialize in frontend technologies, crafting responsive and interactive web applications with HTML, CSS, JavaScript, and modern frameworks like React.</p>
                        <div class="skill-tags">
                            <span class="skill-tag">HTML5</span>
                            <span class="skill-tag">CSS3</span>
                            <span class="skill-tag">JavaScript (ES6+)</span>
                            <span class="skill-tag">React</span>
                            <span class="skill-tag">GSAP</span>
                            <span class="skill-tag">UI/UX Design</span>
                            <span class="skill-tag">Figma</span>
                            <span class="skill-tag">Photoshop</span>
                            <span class="skill-tag">Illustrator</span>
                            <span class="skill-tag">Responsive Design</span>
                            <span class="skill-tag">Web Animation</span>
                        </div>
                    </div>
                    <div class="about-detail-item">
                        <h3>My Philosophy</h3>
                        <img src="https://placehold.co/400x250/555555/FFFFFF?text=Problem+Solver" alt="Problem Solver">
                        <p>I approach every project as a unique puzzle, seeking creative and efficient solutions. My philosophy revolves around continuous learning, attention to detail, and a commitment to delivering high-quality results. I enjoy collaborating with others and bringing diverse ideas together to form a cohesive and impactful final product.</p>
                    </div>
                    <div class="about-detail-item">
                        <h3>Beyond the Code</h3>
                        <img src="https://placehold.co/400x250/666666/FFFFFF?text=Personal+Interests" alt="Personal Interests">
                        <p>When I'm not immersed in design or code, you might find me exploring new digital art techniques, dabbling in photography, or enjoying outdoor activities. These passions outside of work often fuel my creativity and provide fresh perspectives that I bring back into my professional projects.</p>
                    </div>
                </div>
                <button class="portfolio-button" id="contact-button">Contact Me</button>
            </div>
        </div>

        <!-- Contact Section -->
        <div class="page-section" id="contact-page-section">
            <h1 id="contact-page-title">Get in Touch!</h1>
            <div class="contact-section-content">
                <p>I'm always excited to discuss new projects, creative ideas, or opportunities to make a positive impact. Feel free to reach out!</p>
                <div class="contact-methods">
                    <div class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <p>Email: <a href="mailto:pulitha.sethnindu@example.com">pulitha.sethnindu@example.com</a></p>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-phone-alt"></i>
                        <p>Phone: +94 77 123 4567</p>
                    </div>
                    <div class="contact-item">
                        <i class="fab fa-linkedin"></i>
                        <p>LinkedIn: <a href="https://www.linkedin.com/in/pulithasethnindu" target="_blank">linkedin.com/in/pulithasethnindu</a></p>
                    </div>
                    <div class="contact-item">
                        <i class="fab fa-github"></i>
                        <p>GitHub: <a href="https://github.com/pulithasethnindu" target="_blank">github.com/pulithasethnindu</a></p>
                    </div>
                </div>
                <form class="contact-form">
                    <h3>Send me a message</h3>
                    <input type="text" placeholder="Your Name" required>
                    <input type="email" placeholder="Your Email" required>
                    <textarea placeholder="Your Message" rows="5" required></textarea>
                    <button type="submit" class="portfolio-button">Send Message</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Ruler and Navigation -->
    <div class="ruler-container" id="ruler-container">
        <div class="ruler-wrapper">
            <div class="ruler" id="ruler"></div>
            <div class="ruler-label" id="home-label">Home</div>
            <div class="ruler-label" id="about-label">About</div>
            <div class="ruler-label" id="contact-label">Contact</div>
        </div>
    </div>

    <div id="next-arrow" title="Next Page" role="button" aria-label="Next Page"></div>
    <div id="prev-arrow" title="Previous Page" role="button" aria-label="Previous Page"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollToPlugin.min.js"></script>
    <script>
        // GSAP Plugins Registration
        gsap.registerPlugin(ScrollToPlugin);

        // DOM Elements
        const blurLayer = document.getElementById('blur-layer');
        const contentArea = document.getElementById('content-area'); // The main scrollable div
        const typingElement = document.getElementById("typing");
        const ruler = document.getElementById("ruler");
        const homeLabel = document.getElementById("home-label");
        const aboutLabel = document.getElementById("about-label");
        const contactLabel = document.getElementById("contact-label");
        const container = document.getElementById("ruler-container");
        const background = document.getElementById("background");
        const nextArrow = document.getElementById("next-arrow");
        const prevArrow = document.getElementById("prev-arrow");

        const homeSection = document.getElementById('home-section');
        const aboutPageSection = document.getElementById('about-page-section');
        const aboutSummaryContent = document.getElementById('about-summary-content');
        const aboutDetailContent = document.getElementById('about-detail-content');
        const contactPageSection = document.getElementById('contact-page-section'); // The full contact page section

        const mainTitle = document.getElementById("main-title"); // Global title for home
        const aboutPageTitle = document.getElementById("about-page-title"); // Title for about page
        const contactPageTitle = document.getElementById("contact-page-title"); // Title for contact page

        // const moreAboutMeButton = document.getElementById("more-about-me-button"); // REMOVED
        const scrollDownArrows = document.getElementById("scroll-down-arrows"); // NEW ARROWS
        const contactButton = document.getElementById("contact-button"); // "Contact Me" button on detailed about page

        // Spotlight effect for blur layer - REINTRODUCED
        let mouseX = window.innerWidth / 2;
        let mouseY = window.innerHeight / 2;
        let targetX = mouseX;
        let targetY = mouseY;

        // Set initial custom properties for the blur layer
        blurLayer.style.setProperty('--x', `${mouseX}px`);
        blurLayer.style.setProperty('--y', `${mouseY}px`);

        // Add event listeners for mouse and touch to update target coordinates
        document.addEventListener('mousemove', (e) => {
            targetX = e.clientX;
            targetY = e.clientY;
        });

        document.addEventListener('touchstart', (e) => {
            if (e.touches.length > 0) {
                targetX = e.touches[0].clientX;
                targetY = e.touches[0].clientY;
            }
        }, { passive: true });

        document.addEventListener('touchmove', (e) => {
            if (e.touches.length > 0) {
                targetX = e.touches[0].clientX;
                targetY = e.touches[0].clientY;
            }
        }, { passive: true });

        // Animation loop to smoothly update the blur mask position
        function updateBlurMask() {
            // Interpolate current mouse/touch position towards target for smooth movement
            mouseX += (targetX - mouseX) * 0.1;
            mouseY += (targetY - mouseY) * 0.1;
            // Update CSS custom properties for the blur mask
            blurLayer.style.setProperty('--x', `${mouseX}px`);
            blurLayer.style.setProperty('--y', `${mouseY}px`);
            // Request next animation frame
            requestAnimationFrame(updateBlurMask);
        }
        updateBlurMask(); // Start the animation loop
        // END REINTRODUCED BLUR EFFECT LOGIC

        // Typing effect for home page
        const roles = ["Graphic Designer", "Web Developer", "Creative Thinker", "Tech Explorer", "UI/UX Enthusiast"];
        let roleIndex = 0, charIndex = 0, isDeleting = false, typingPaused = false;

        function typeEffect() {
            if (typingPaused) return;
            const current = roles[roleIndex];
            typingElement.textContent = isDeleting
                ? current.substring(0, charIndex--)
                : current.substring(0, charIndex++);

            let typeSpeed = isDeleting ? 50 : 100;
            if (isDeleting && charIndex === 0) {
                isDeleting = false;
                roleIndex = (roleIndex + 1) % roles.length;
                typeSpeed = 500; // Pause before typing next role
            } else if (!isDeleting && charIndex === current.length + 1) {
                isDeleting = true;
                typeSpeed = 1000; // Pause after typing a role
            }
            setTimeout(typeEffect, typeSpeed);
        }

        function startTyping() {
            roleIndex = 0;
            charIndex = 0;
            isDeleting = false;
            typingPaused = false;
            typingElement.style.display = "block"; // Ensure it's visible
            typeEffect();
        }

        // Ruler setup
        for (let i = 0; i < 600; i++) {
            const tick = document.createElement("div");
            tick.className = "tick";
            if (i % 10 === 0) {
                tick.classList.add("long");
            } else if (i % 5 === 0) {
                tick.classList.add("medium");
            } else {
                tick.classList.add("short");
            }
            const line = document.createElement("div");
            line.className = "tick-line";
            tick.appendChild(line);
            ruler.appendChild(tick);
        }

        let isDragging = false;
        let startX = 0;
        let targetDeltaX = 0;
        let currentDeltaX = 250; // Initial position for Home
        let snapTargetX = 250;
        let currentPage = 0; // 0: Home, 1: About (includes detailed), 2: Contact
        let isAboutDetailedView = false; // Tracks if scrolled to detailed part of about page

        const pageSnapPoints = {
            0: 250,  // Home
            1: -300, // About (summary part)
            2: -850  // Contact
        };

        container.style.cursor = "grab";

        container.addEventListener("mousedown", (e) => {
            isDragging = true;
            startX = e.clientX;
            targetDeltaX = 0;
            container.style.cursor = "grabbing";
            ruler.style.transition = "none"; // Disable CSS transition during drag
        });

        document.addEventListener("mousemove", (e) => {
            if (!isDragging) return;
            targetDeltaX = e.clientX - startX;
        });

        document.addEventListener("mouseup", () => {
            if (!isDragging) return;
            isDragging = false;
            container.style.cursor = "grab";

            const dragThreshold = 150;
            if (targetDeltaX < -dragThreshold && currentPage < Object.keys(pageSnapPoints).length - 1) {
                currentPage++;
            } else if (targetDeltaX > dragThreshold && currentPage > 0) {
                currentPage--;
            }
            snapTargetX = pageSnapPoints[currentPage];
            updatePageState(true); // Pass true to indicate ruler navigation
        });

        container.addEventListener("touchstart", (e) => {
            isDragging = true;
            startX = e.touches[0].clientX;
            targetDeltaX = 0;
            container.style.cursor = "grabbing";
            ruler.style.transition = "none";
        }, { passive: true });

        document.addEventListener("touchmove", (e) => {
            if (!isDragging) return;
            targetDeltaX = e.touches[0].clientX - startX;
        }, { passive: true });

        document.addEventListener("touchend", () => {
            if (!isDragging) return;
            isDragging = false;
            container.style.cursor = "grab";

            const dragThreshold = 150;
            if (targetDeltaX < -dragThreshold && currentPage < Object.keys(pageSnapPoints).length - 1) {
                currentPage++;
            } else if (targetDeltaX > dragThreshold && currentPage > 0) {
                currentPage--;
            }
            snapTargetX = pageSnapPoints[currentPage];
            updatePageState(true); // Pass true to indicate ruler navigation
        }, { passive: true });

        // Animation loop for ruler movement
        function animateRuler() {
            if (!isDragging) {
                // Smooth snap back/to target
                currentDeltaX = gsap.utils.interpolate(currentDeltaX, snapTargetX, 0.1);
            } else {
                // Follow drag
                const baseOffset = pageSnapPoints[currentPage];
                const desiredX = baseOffset + targetDeltaX;
                currentDeltaX = gsap.utils.interpolate(currentDeltaX, desiredX, 0.15);
            }
            ruler.style.transform = `translateX(calc(-50% + ${currentDeltaX}px))`;
            updateRulerLabels();
            requestAnimationFrame(animateRuler);
        }
        animateRuler();

        // Update page content based on currentPage
        function updatePageState(isRulerNav = false) {
            typingPaused = true; // Always pause typing when switching pages

            // Handle title changes and section visibility/opacity
            const sections = [homeSection, aboutPageSection, contactPageSection];
            const titles = {
                0: { element: mainTitle, text: "Pulitha Sethnindu" },
                1: { element: aboutPageTitle, text: "About Me" },
                2: { element: contactPageTitle, text: "Get in Touch!" }
            };

            // Before switching, handle scroll for current page if it's the about page
            if (currentPage === 1 && isRulerNav) {
                // If navigating away from the about page via ruler, ensure it scrolls to top first
                gsap.to(contentArea, {
                    duration: 0.5,
                    scrollTo: { y: 0, autoKill: false },
                    onComplete: () => {
                        isAboutDetailedView = false; // Reset detailed view state
                    }
                });
            }

            gsap.to(sections, {
                opacity: 0,
                duration: 0.3,
                onComplete: () => {
                    sections.forEach(sec => {
                        sec.classList.remove('active');
                        sec.style.display = 'none'; // Temporarily hide to prevent layout issues
                    });

                    // Hide all titles initially
                    mainTitle.style.display = 'none';
                    aboutPageTitle.style.display = 'none';
                    contactPageTitle.style.display = 'none';

                    typingElement.style.display = 'none';

                    // Ensure scroll-down arrows are hidden by default unless explicitly shown
                    gsap.set(scrollDownArrows, { opacity: 0, pointerEvents: 'none' }); // NEW: Hide arrows

                    let currentSection;
                    let currentTitleElement;
                    let newBackgroundStyle; // Use style property directly for backgrounds
                    let blurLayerDisplay = "block"; // Default to visible for blur layer
                    let blurLayerMask = `radial-gradient(circle 250px at var(--x, ${mouseX}px) var(--y, ${mouseY}px),
                        transparent 0%, transparent 96%, rgba(0, 0, 0, 0.8) 98%, black 100%)`; // Default spotlight mask
                    
                    switch (currentPage) {
                        case 0: // Home
                            currentSection = homeSection;
                            currentTitleElement = mainTitle;
                            newBackgroundStyle = "url('https://wallpapershome.com/images/pages/pic_h/26426.jpg')"; // Keep original image
                            currentTitleElement.textContent = titles[0].text;
                            currentTitleElement.style.display = 'block'; // Make specific title visible
                            typingElement.style.display = 'block';
                            startTyping();
                            // No fade-in animation for home section, set directly
                            gsap.set(currentSection, { opacity: 1, y: 0 }); // Ensure immediate visibility
                            gsap.set(currentTitleElement, { opacity: 1, y: 0 }); // Ensure immediate visibility
                            break;
                        case 1: // About (summary + detailed)
                            currentSection = aboutPageSection;
                            currentTitleElement = aboutPageTitle;
                            // Changed to match the contact page's dark gradient
                            newBackgroundStyle = "linear-gradient(to bottom, #0f1c2c, #0a141d)";
                            currentTitleElement.textContent = titles[1].text;
                            currentTitleElement.style.display = 'block'; // Make specific title visible
                            // Ensure detailed content is hidden when arriving via ruler navigation
                            aboutDetailContent.style.opacity = 0;
                            aboutDetailContent.style.pointerEvents = 'none';
                            isAboutDetailedView = false; // Reset detailed view on page load
                            
                            // Show scroll-down arrows instead of a button
                            gsap.to(scrollDownArrows, { opacity: 1, pointerEvents: 'auto', duration: 0.3, delay: 0.5 }); // NEW: Show arrows
                            
                            gsap.fromTo(currentSection, { opacity: 0, y: 20 }, { opacity: 1, y: 0, duration: 0.7, delay: 0.2 });
                            gsap.fromTo(currentTitleElement, { opacity: 0, y: -20 }, { opacity: 1, y: 0, duration: 0.5 });
                            
                            blurLayerMask = "none"; // Remove spotlight for About page
                            break;
                        case 2: // Contact
                            currentSection = contactPageSection;
                            currentTitleElement = contactPageTitle;
                            newBackgroundStyle = "linear-gradient(to bottom, #0f1c2c, #0a141d)"; // This is the color to match
                            currentTitleElement.textContent = titles[2].text;
                            currentTitleElement.style.display = 'block'; // Make specific title visible

                            gsap.fromTo(currentSection, { opacity: 0, y: 20 }, { opacity: 1, y: 0, duration: 0.7, delay: 0.2 });
                            gsap.fromTo(currentTitleElement, { opacity: 0, y: -20 }, { opacity: 1, y: 0, duration: 0.5 });
                            break;
                    }

                    // Apply new background style to the main background element
                    background.style.backgroundImage = newBackgroundStyle;
                    
                    // Apply blur layer display and mask
                    blurLayer.style.display = blurLayerDisplay;
                    blurLayer.style.mask = blurLayerMask;
                    blurLayer.style.webkitMask = blurLayerMask;


                    // Show the active section
                    if (currentSection) {
                        currentSection.style.display = 'flex'; // Use flex for sections to center content
                        currentSection.classList.add('active');
                    }
                }
            });
            updateRulerLabels();
        }

        // Update ruler labels active state
        function updateRulerLabels() {
            homeLabel.classList.remove('active');
            aboutLabel.classList.remove('active');
            contactLabel.classList.remove('active');

            switch(currentPage) {
                case 0:
                    homeLabel.classList.add('active');
                    break;
                case 1:
                    aboutLabel.classList.add('active');
                    break;
                case 2:
                    contactLabel.classList.add('active');
                    break;
            }
        }

        // Navigation arrow click handlers
        nextArrow.addEventListener('click', () => {
            if (currentPage < Object.keys(pageSnapPoints).length - 1) {
                currentPage++;
                snapTargetX = pageSnapPoints[currentPage];
                updatePageState(true);
            }
        });

        prevArrow.addEventListener('click', () => {
            if (currentPage > 0) {
                currentPage--;
                snapTargetX = pageSnapPoints[currentPage];
                updatePageState(true);
            }
        });

        // NEW: Scroll down arrows click handler
        scrollDownArrows.addEventListener('click', () => {
            if (currentPage === 1) { // Only do this if on the About page
                gsap.to(contentArea, {
                    duration: 1.0,
                    scrollTo: {
                        y: aboutDetailContent, // Scroll to the detailed content element
                        offsetY: 20, // Optional offset from the top of the target
                        autoKill: true // Kill any other active scroll tweens
                    },
                    ease: "power2.out",
                    onStart: () => {
                        // Make detailed content visible right before scrolling
                        aboutDetailContent.style.opacity = 1;
                        aboutDetailContent.style.pointerEvents = 'auto';
                        isAboutDetailedView = true;
                        // Animate its children in
                        gsap.fromTo(aboutDetailContent.querySelectorAll('.about-detail-item'), { opacity: 0, y: 20 }, { opacity: 1, y: 0, duration: 0.5, stagger: 0.1, delay: 0.2 });
                        // Change the main title on the about page
                        aboutPageTitle.textContent = "My Story";
                    },
                    onComplete: () => {
                        // Hide the scroll-down arrows after scrolling
                        gsap.to(scrollDownArrows, { opacity: 0, pointerEvents: 'none', duration: 0.3 }); // NEW: Hide arrows
                    }
                });
            }
        });


        // "Contact Me" button click (from detailed about page)
        contactButton.addEventListener('click', () => {
            currentPage = 2; // Navigate to contact page
            snapTargetX = pageSnapPoints[currentPage];
            updatePageState(true);
        });

        // Prevent form submission for the contact form (placeholder)
        const contactForm = document.querySelector('.contact-form');
        if (contactForm) {
            contactForm.addEventListener('submit', (e) => {
                e.preventDefault();
                alert("Thank you for your message! (Form submission is simulated)");
                // In a real application, you would send this data to a backend server.
            });
        }

        // Initial state update
        updatePageState();
    </script>
</body>
</html>
